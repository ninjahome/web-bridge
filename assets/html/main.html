<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ninja User Info</title>
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>
    <script src="/assets/js/abi_tweet_vote.js"></script>
    <script src="/assets/js/abi_game_lottery.js"></script>
    <script src="/assets/js/utils.js"></script>
    <script src="/assets/js/main_class.js"></script>
    <script src="/assets/js/main_common.js"></script>
    <script src="/assets/js/main_metamask.js"></script>
    <script src="/assets/js/main_twitter.js"></script>
    <script src="/assets/js/main_user_tweets.js"></script>
    <script src="/assets/js/main_top.js"></script>
    <script src="/assets/js/main_operate_area.js"></script>

    <style about="frame div">

        .d-radius {
            border-radius: 9999px;
        }

        .container {
            font-family: DIN, "Mona Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
            display: flex; /* 启用flex布局 */
            height: 100vh; /* 容器高度设置为视窗高度 */
            width: 80%;
            margin-left: auto; /* 左边距自动 */
            margin-right: auto; /* 右边距自动 */
        }

        .left-menu-area {
            flex: 1; /* 左边菜单区域占据剩余空间的一部分 */
            background-color: #ffffff; /* 背景色，可根据需要调整 */
            padding: 10px; /* 内边距 */
            display: flex; /* 添加flex布局 */
            flex-direction: column; /* 确保子元素垂直排列 */
        }

        .middle-content-area {
            flex: 3; /* 中间主要内容区域占据剩余空间的两部分 */
            background-color: #fff; /* 背景色，可根据需要调整 */
            border-right: 1px solid #F7F8F9; /* 右边框线 */
        }

        .right-operation-area {
            flex: 1; /* 右边操作区域占据剩余空间的一部分 */
            background-color: transparent; /* 背景色，可根据需要调整 */
            padding: 10px; /* 内边距 */
        }

        .menu-list-left-area {
            list-style: none;
            padding: 0;
            border-right: 1px solid #F7F8F9; /* 右边框线 */
            display: flex; /* 添加flex布局 */
            flex-direction: column; /* 确保子元素垂直排列 */
            width: 100%; /* 设置宽度为父容器的100% */
        }

        .menu-icon {
            vertical-align: middle;
            /* 可以添加更多样式，例如设置图标大小 */
            height: auto; /* 或任何适合你设计的尺寸 */
            width: 16px; /* 保持图像比例 */
            margin-right: 8px; /* 在图标和文本之间添加一些空间 */
        }

        .menu-item-left-area {
            content: '';
            display: inline-block;
            margin-right: 8px;
            vertical-align: middle;
            background-size: contain;
            background-repeat: no-repeat;
            white-space: nowrap;
            padding: 11px 32px;
            cursor: pointer;
            color: #1B1B1D; /* 默认颜色 */
        }

        .menu-item-left-area:hover {
            background-color: #F7F8F9; /* 鼠标悬停时的颜色 */
            border-radius: 999px;
        }

        .menu-item-left-area.active {
            background-color: #F7F8F9; /* 被选中的菜单项颜色 */
            border-radius: 999px;
            font-weight: bolder;
        }

        .content-in-middle-area {
            display: none; /* 默认隐藏所有内容 */
        }

        .content-in-middle-area.active {
            display: block; /* 显示激活的内容 */
        }

    </style>
    <style about="tweet park">
        .tweets-park {
            flex-grow: 1.618;
            background-color: #e6e6e6;
            margin-bottom: 20px;
        }

        .tweet-first-half {
            display: flex; /* 启用flex布局 */
            align-items: center; /* 垂直居中对齐子元素 */
        }

        .tweet-header {
            display: inline-block;
            align-items: center;
            margin-bottom: 8px;
        }

        .tweet-header img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .tweet-header .name {
            font-size: 18px;
            font-weight: bold;
        }

        .tweet-header .username {
            color: #555;
            margin-left: 5px;
        }

        .tweet-footer {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            /*margin-top: -4px;*/
        }

        .tweet-footer .tweet-action {
            display: flex;
            align-items: center;
            white-space: nowrap;
        }

        .tweet-action button {
            display: flex;
            align-items: center;
            /* 其他必要的样式 */
        }

        .tweet-action-vote img {
            width: 22px;
            height: auto;
        }


        .vote-count {
            white-space: nowrap;
            font-size: 14px;
            color: #898989;
        }

        .vote-number {
            font-size: 20px;
            font-weight: bold;
            color: #4848D8;
        }
    </style>
    <style about="tweet card">

        .tweet-card {
            display: block;
            min-height: 100px;
            max-height: 400px;
            overflow: hidden;
            background-color: #fff;
            border-bottom: 1px solid #F7F8F9;
            padding: 16px;
            transition: max-height 0.3s ease;
        }

        .tweet-footer .tweet-info {
            font-style: italic;
        }

        .twitterAvatar {
            width: 48px;
            margin-right: 8px;
            border-radius: 50%;
        }

        .tweet-action-vote {
            background-color: #4848D8;
            color: white;
            padding: 10px 24px;
            margin-left: 8px;
            border: none;
            border-radius: 999px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 16px;
            font-weight: bold;
        }

        .tweet-action-vote span {
            font-weight: lighter;
        }

        .tweet-action-vote:hover {
            background-color: #3333BE;
        }

        .show-more {
            right: 0;
            bottom: 0;
            color: #4848D8;
            cursor: pointer;
            margin: 0 0 0 4px;
            font-size: 14px;
            border: none;
        }

        .show-more:hover {
            color: #3333BE;
        }

        .tweet-content {
            display: -webkit-box;
            -webkit-line-clamp: 5;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            position: relative;
        }

        .tweet-content-collapsed {
            overflow: hidden;
            cursor: pointer;
            display: -webkit-box;
            -webkit-line-clamp: 5;
            -webkit-box-orient: vertical;
            font-size: 16px;
            line-height: 1.5;
            font-weight: normal;
            color: #1B1B1D;
            position: relative;
        }

        .tweetPaymentDelete {
            display: none;
            background-color: #d51515; /* 例如，红色背景 */
            color: white;
            padding: 6px 12px;
            margin: 4px 2px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .tweetPaymentDelete.show {
            display: inline-block;
        }

        .tweetPaymentRetry {
            display: none;
            background-color: #1DA1F2;
            color: white;
            padding: 6px 12px;
            margin: 4px 2px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .tweetPaymentRetry.show {
            display: inline-block;
        }
    </style>
    <style about="user profile detail vid">
        .hover-card img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
        }

        .hover-card-content {
            margin-left: 60px;
        }

        .buy-key-button {
            position: absolute;
            right: 10px;
            top: 10px;
            padding: 5px 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .hover-card {
            display: none; /* 默认不显示 */
            position: absolute;
            z-index: 5;
            padding: 10px;
            background: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            top: 100%; /* 定位到 tweet-header 下方 */
            left: 0;
        }
    </style>
    <style about="tweet vote div">
        .vote-chose-modal-class {
            display: none; /* 默认隐藏 */
            position: fixed; /* 固定位置 */
            z-index: 1; /* 置于顶层 */
            left: 0;
            top: 0;
            width: 100%; /* 宽度 */
            height: 100%; /* 高度 */
            overflow: auto; /* 启用滚动条 */
            background-color: rgb(0, 0, 0); /* 背景颜色 */
            background-color: rgba(0, 0, 0, 0.4); /* 黑色背景透明度 */
        }

        .vote-no-modal-content {
            background-color: #fefefe;
            margin: 15% auto; /* 15% 从顶部开始 */
            padding: 32px;
            border: 1px solid #888;
            border-radius: 24px;
            width: 50%; /* 宽度 */

        }

        .vote-no-modal-body {
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            align-content: center;


        }

        .quantity-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            margin-top: 24px;
        }

        .quantity-selector button {
            width: 42px;
            height: 42px;
            font-size: 16px;
            padding: 0;
            border: none;
            background-color: #F1F2F3;
        }

        .quantity-selector button:hover {
            background-color: #D3D5D6; /* 鼠标经过时的背景色 */
        }

        .quantity-selector button:active {
            background-color: #B0B2B3; /* 鼠标点击时的背景色 */
            color: #4848D8;
        }

        .quantity-selector input {
            height: 40px;
            text-align: center;
            border: 1px solid #F1F2F3;
            padding: 0;
        }

        /* 关闭按钮 */
        .vote-no-close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .vote-no-close:hover,
        .vote-no-close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .vote-no-modal-footer {
            display: flex;
            justify-content: center;
            margin-top: 24px;
        }

        .cancel-btn {
            margin: 0 8px;
            padding: 10px 42px;
            border-radius: 9999px;
            background-color: transparent;
            border: 1px solid rgb(221, 221, 222);
            font-size: 14px;
            color: #7E7F82;
            cursor: pointer;
            white-space: nowrap;
        }

        .confirm-btn {
            margin: 0 8px;
            padding: 10px 42px;
            border-radius: 9999px;
            border: none;
            background-color: #4848D8;
            font-size: 14px;
            color: #ffffff;
        }
    </style>
    <style about="tweet post div">
        .d-radius {
            border-radius: 9999px;
        }

        .modal-overlay {
            display: none; /* 默认隐藏 */
            position: fixed; /* 固定定位 */
            top: 0; /* 顶部对齐 */
            left: 0; /* 左侧对齐 */
            width: 100%; /* 宽度为整个视窗 */
            height: 100%; /* 高度为整个视窗 */
            background-color: rgba(0, 0, 0, 0.5); /* 半透明黑色背景 */
            z-index: 1; /* 确保它位于内容和模态框之间 */
        }

        .modal-for-tweet-post {
            display: none;
            z-index: 2;
            padding: 16px 32px; /* 增加内边距 */
            /*display: none; !* 默认隐藏 *!*/
            position: fixed; /* 固定定位 */
            left: 50%; /* 水平居中 */
            top: 50%; /* 垂直居中 */
            transform: translate(-50%, -50%); /* 校正到完全居中 */
            background-color: #fff; /* 背景颜色 */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* 盒子阴影 */
            width: 80%; /* 宽度，可根据需要调整 */
            max-width: 500px; /* 最大宽度 */
        }

        .tweets-content-txt-area {
            margin: 0 auto;
            display: block; /* 确保元素为块级元素 */
            box-sizing: border-box;
            width: 100%; /* 文本区域宽度 */
            min-height: 4em; /* 至少容纳3行文字的高度 */
            max-height: 26em; /* 最大高度，约等于10行文字 */
            overflow-y: auto; /* 内容超出最大高度时显示垂直滚动条 */
            padding: 4px; /* 内边距 */
            border: 1px solid #D3D5D6; /* 边框 */
            resize: none; /* 禁止调整大小 */
            position: relative;
        }

        /* 设置所有输入框和可编辑内容的光标颜色 */
        input, textarea, [contenteditable] {
            caret-color: #4848D8;
        }

        .tweets-content-txt-area:focus {
            border-color: rgba(72, 72, 216, 0.45); /* 选中时的边框颜色 */
            outline: none;
        }

        .tweets-content-txt-area p {
            margin: 4px 4px;

        }

        .tweets-content-txt-area span {
            font-size: 14px; /* 文字大小，可以根据需要调整 */
            line-height: 20px; /* 行高，一般与字体大小相同 */

        }

        .tweets-content-txt-area:empty:before {
            content: attr(data-placeholder);
            color: grey;
            pointer-events: none;
            display: block; /* 显示为块级元素 */
        }

        /* 确保即使 div 有空白也显示占位符 */
        .tweets-content-txt-area:empty:focus:before {
            content: attr(data-placeholder);
        }

        #tweet-post-with-eth-btn {
            display: flex;
            align-items: center;
            float: right;
            background-color: #4848D8;
            color: white; /* 字体颜色 */
            border: none; /* 无边框 */
            padding: 8px 16px; /* 内边距 */
            cursor: pointer; /* 鼠标样式 */
            margin: 16px 0; /* 下边距 */
        }

        #tweet-post-with-eth-btn:hover {
            background-color: #3333BE; /* 悬停时背景颜色 */
        }

        .show-post-tweet-div {
            background-color: #4848D8;
            color: white; /* 字体颜色 */
            border: none; /* 无边框 */
            padding: 8px 32px; /* 内边距 */
            cursor: pointer; /* 鼠标样式 */
            font-size: 16px; /* 字体大小 */
            box-shadow: rgba(0, 0, 0, 0.08) 0 8px 28px;
        }

        .cancel-btn:hover {
            background-color: #F1F2F3; /* 悬停时背景颜色 */
        }

        .confirm-btn:hover,
        .show-post-tweet-div:hover {
            background-color: #3333BE; /* 悬停时背景颜色 */
        }

        .tweet-post-close-btn {
            float: right; /* 右上角 */
            font-size: 24px; /* 字体大小 */
            line-height: 24px; /* 行高 */
            cursor: pointer; /* 鼠标样式 */
            color: #a7aaac; /* 颜色 */
            margin-bottom: 16px;
        }

        .tweet-post-close-btn:hover {
            color: black; /* 悬停时颜色 */
        }

    </style>
    <style about="game-lottery">
        .lottery-round-info,
        .lottery-timer {
            width: 348px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .lottery-round-info {
            height: 120px;
            border-top-left-radius: 16px;
            border-top-right-radius: 16px;
            background-color: #DD2111;
            color: white;
            padding: 12px 0;
        }

        .lottery-round {
            border: 1px solid rgba(255, 255, 255, 0.5);
            padding: 2px 32px;
            font-size: 12px;
            margin-top: 12px;
        }

        .lottery-amount {
            font-family: DINCond-Black, "Mona Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 56px;
            padding: 0;
        }

        .lottery-amount-div {
            line-height: 1;
            display: flex;
            flex-wrap: nowrap;
            align-items: baseline;
            margin: 4px 0;
        }

        .lottery-timer {
            height: 104px;
            background-color: #F7F8F9;
            border-bottom: 1px dashed #E4E4DF;
        }

        .lottery-participate-btn {
            border: none;
            background-color: #1B1B1D;
            color: white;
            padding: 8px 42px;
            border-radius: 9999px;
            margin-top: 6px;
        }

        .lottery-stats-label {
            margin: 2px 0;
        }

        .lottery-stats {
            width: 332px;
            background-color: #F7F8F9;
            border-bottom-left-radius: 16px;
            border-bottom-right-radius: 16px;
            padding: 8px;
        }

        .countdown {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 18px;
        }

        .number {
            font-family: DINCond-Black, "Mona Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 36px;
            padding: 4px 12px;
            margin: 0 12px 6px;
            border-radius: 10px;
            color: #302F2F;
        }

        .hours,
        .minutes,
        .seconds {
            background-color: #ECEDEF; /* red */
            border: 1px solid #DD5232;
        }

        .countdown-result {
            display: none;
        }
    </style>
    <style about="team-card-in-top">
    </style>
    <style about="about-user-div">

        .income-tweet-area,
        .income-game-area,
        .income-kol-area,
        .user-settings {
            background-color: #ffffff;
            padding: 16px;
            border-bottom: 1px solid #F7F8F9;
        }
        .middle-div-income-inner {
            display: flex;
            flex-direction: column;
        }

        .income-header,
        .user-area-tittle {
            color: #1B1B1D; /* 深色文本 */
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 12px;
        }

        .income-body {
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            white-space: nowrap;
        }

        .income-body span {
            color: #1B1B1D;
            display: inline-block;
            margin: 2px;
        }

        .withdraw-btn {
            border-radius: 999px;
            border: none;
            color: #fff;
            font-size: 16px;
            font-weight: normal;
            padding: 8px 24px;
            cursor: pointer;
            background-color: #4848D8;
            flex-shrink: 0;
        }

        .middle-div-income-inner button:hover {
            background-color: #3333BE; /* 深一点的推特蓝 */
        }

        .user-area-tittle {
            color: #333; /* 深色文本 */
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 4px;
        }


        /* Twitter 信息样式 */
        .about-twitter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #7E7F82; /* 中度深色文本 */
            padding: 5px;
        }

        /* Web3 ID 和 积分信息样式 */
        .about-ninja {
            width: 100%;
            background-color: #F1F2F3;
            border: 1px dashed #D3D5D6;
            border-radius: 16px;
            padding: 8px; /* 添加一些内边距，使内容不紧贴边框 */
            display: inline-block; /* 使背景色和边框只包裹内容 */
            word-wrap: break-word; /* 在超出宽度时自动换行 */
            margin-bottom: 16px;

        }
        .about-ninja span {
            display: inline-block;
            margin: 2px 0;
        }
        .user-web3-id,
        .user-ninja-noun {
            font-size: 16px;
            font-weight: bolder;
            color: #1B1B1D;
        }
        .user-setting-action {
            display: flex;
            justify-content: flex-start;
        }

        /* Twitter 头像和用户名样式 */
        .user-twitter-avatar img {
            width: 50px; /* 调整为适合的尺寸 */
            height: 50px;
            border-radius: 50%;
        }

        .user-twitter-name, .user-twitter-username {
            color: #333; /* 深色文本 */
            padding: 0 5px;
        }
    </style>
    <style about="ninja user profile">
        .nj-user-profile {
            display: none;
        }

    </style>
</head>
<body>
<div class="container">
    <div class="left-menu-area">
        <img src="/assets/file/logo.png" id="dessage-log-to-nj-log"
             onclick="menuOnClicked.call(document.getElementById('settings-menu-item'), 4)"
             style="width: 40px;height: 40px;border-radius: 50%;cursor: pointer" alt="avatar">
        <ul class="menu-list-left-area">
            <li onclick="menuOnClicked.call(this,0)" class="menu-item-left-area active" data-content="middle-div-home">
                <img src="/assets/file/path-to-home-icon.png" alt="Home" class="menu-icon"/> 主页
            </li>
            <li onclick="menuOnClicked.call(this,1)" class="menu-item-left-area" data-content="middle-div-leaderboard">
                <img src="/assets/file/path-to-leaderboard-icon.png" alt="Home" class="menu-icon"/> 排行榜
            </li>

            <li onclick="menuOnClicked.call(this,2)" class="menu-item-left-area" data-content="middle-div-user-tweets">
                <img src="/assets/file/path-to-twitter-icon.png" alt="Home" class="menu-icon"/> 推文
            </li>
            <li onclick="menuOnClicked.call(this,3)" class="menu-item-left-area" data-content="middle-div-about-user">
                <img src="/assets/file/path-to-user-icon.png" alt="Home" class="menu-icon"/> 我的
            </li>
            <li onclick="openKolKeyMainPage()" class="menu-item-left-area" data-content="middle-div-userKolKey">
                <img src="/assets/file/path-to-keys-icon.png" alt="Home" class="menu-icon"/> Keys
            </li>
        </ul>
        <button class="show-post-tweet-div d-radius" onclick="showPostTweetDiv()">发推</button>
    </div>

    <div id="tweet-header-template" style="display: none">
        <div class="tweet-first-half">
            <div>
                <img src="/assets/file/logo.png" alt="Avatar" class="twitterAvatar">
            </div>
            <div class="tweet-header">
                <div style="margin-top: 2px">
                    <span class="name twitterName"></span>
                    <span class="username twitterUserName"></span>
                </div>
                <span class="time tweetCreateTime"
                      style="font-size: 12px; color: #898989">2024-01-18</span>
            </div>
        </div>
        <div class="tweet-content tweet-content-collapsed">
        </div>
        <span class="show-more" data-more="true"
              onclick="showFullTweetContent.call(this)">更多</span>
    </div>

    <div class="middle-content-area">
        <div id="middle-div-home" class="content-in-middle-area active">
            <div id="tweetTemplateForHomePage" class="tweet-card" style="display: none;">
                <div class="tweet-footer">
                    <div class="tweet-info">
                        <span class="vote-count">投票数: <span class="vote-number">0</span></span>
                    </div>

                    <div class="tweet-action">
                        <button class="tweet-action-vote">
                            <img src="/assets/file/tweet-action-vote-eth.png"
                                 style="width: 22px;height: auto" alt=""/>
                            <span style="font-weight: lighter"> <span
                                        class="tweet-action-vote-val">0.01</span> eth</span> 投票
                        </button>
                    </div>
                </div>
            </div>
            <div class="tweets-park" id="tweets-park">   </div>
        </div>
        <div id="middle-div-leaderboard" class="content-in-middle-area">
            <div class="topic-switch">
                <button onclick="initTopPage()">推文排行榜</button>
                <button onclick="switchToTopTeam(true)">彩票团队排行榜</button>
                <button onclick="switchToTopKol()">KOL人气排行榜</button>
                <button onclick="switchToTopVoter()">投票人排行榜</button>
            </div>
            <div id="tweetTemplateForTop" class="tweet-card" style="display: none;">
                <div class="tweet-footer">
                    <div class="tweet-info">
                        <span class="vote-count">投票数: <span class="vote-number">0</span></span>
                    </div>
                    <div class="tweet-action">
                        <button class="tweet-action-vote"><img src="/assets/file/tweet-action-vote-eth.png"
                                                               style="width: 22px;height: auto" alt=""/>
                            <span style="font-weight: lighter"> <span
                                        class="tweet-action-vote-val">0.01</span> eth</span> 投票
                        </button>
                    </div>
                </div>
            </div>
            <div class="team-card" id="team-card-in-top-template" style="display: none">
                <div class="team-id" onclick="showTweetDetail.call(this, '.team-card')" style="cursor: pointer">
                    团队ID:<span
                            class="team-id-txt">0xd57a74ac6f606422ffaa1612fb3ad766569b4d4172a78c3989383592689cbfbb</span>
                </div>
                <div class="team-leader">
                    队长：
                    <img src="" alt="Avatar" class="twitterAvatar">
                    <span class="name twitterName"></span>
                    <span class="username twitterUserName"></span>
                </div>
                <div class="team-info">
                    票数：<span class="team-voted-count"></span>
                    人数：<span class="team-members-count"></span>
                </div>
                <div class="team-action">
                    <button class="join-team">加入</button>
                    <button class="show-team-mates">队伍信息</button>
                </div>
                <div class="team-member-park"></div>
                <div class="team-members" id="team-members-template" style="display: none">
                    <img src="" alt="Avatar" class="twitterAvatar">
                    <span class="name twitterName"></span>
                    <span class="username twitterUserName"></span>
                    <span class="user-voted-count">0</span>
                </div>
            </div>
            <div class="tweets-park" id="top-most-voted-tweet"></div>
            <div class="tweets-park" id="top-hot-tweet-team"></div>
            <div id="ninjaUserCardTemplate" class="ninja-user-card" style="display: none">
                <span class="voteOrVotedRangeNo"></span>
                <img src="" alt="Avatar" class="twitterAvatar">
                <span class="name twitterName"></span>
                <span class="username twitterUserName"></span>
                <span class="voteOrVotedNos"></span>
            </div>
            <div class="tweets-park" id="top-hot-Kol"></div>
            <div class="tweets-park" id="top-hot-voter"></div>
        </div>
        <div id="middle-div-user-tweets" class="content-in-middle-area">
            <div class="user-tweet-top-button-area">
                <button onclick="loadTweetsUserPosted()">我的推文</button>
                <button onclick="loadTweetsUserVoted()">我的投票</button>
            </div>

            <div id="tweetTemplateForUserSelf" class="tweet-card" style="display: none;">
                <div class="tweet-footer">
                    <div class="tweet-info">
                        <span class="vote-count">投票数: <span class="vote-number">0</span></span>
                    </div>
                    <div class="tweet-action">
                        支付状态: <span class="tweetPaymentStatus"></span>
                        <button class="tweetPaymentRetry">继续支付</button>
                        <button class="tweetPaymentDelete">删除</button>
                    </div>
                </div>
            </div>

            <div id="tweets-post-by-user" class="tweets-park"></div>

            <div id="tweetTemplateForVoted" class="tweet-card" style="display: none;">
                <div class="tweet-footer">
                    <div class="tweet-info">
                        <span class="vote-count">总票数: <span class="total-vote-number">0</span></span>
                        <span class="vote-count">我的票数: <span class="user-vote-number">0</span></span>
                    </div>
                    <div class="tweet-action">
                        <button class="tweet-action-vote"><img src="/assets/file/tweet-action-vote-eth.png"
                                                               style="width: 22px;height: auto" alt=""/>
                            <span style="font-weight: lighter"> <span
                                        class="tweet-action-vote-val">0.01</span> eth</span> 投票
                        </button>
                    </div>
                </div>
            </div>
            <div id="tweets-voted-by-user" class="tweets-park"></div>
        </div>
        <div id="middle-div-about-user" class="content-in-middle-area">
            <div class="middle-div-income-inner">
                <div class="income-tweet-area">
                    <div class="income-header">推文收入</div>
                    <div class="income-body">
                        <div>
                            <span>推文总数: <span class="tweet-no-has-income" id="tweet-no-has-income" style="font-size: 18px; font-weight: bold">0</span> 篇</span>
                            <br>
                            <span>推文收入: <span class="income-val" id="tweet-income-amount" style="color: #4848D8;font-size: 22px; font-weight: bold">0.000</span> eth</span>
                        </div>
                        <button onclick="withdrawFromUserTweetIncome()" class="withdraw-btn">提现</button>
                    </div>
                </div>

                <div class="income-game-area">
                    <div class="income-header">游戏收入</div>
                    <div class="income-body ">
                        <span>彩票收入: <span class="income-val" id="lottery-game-income" style="color: #DE4033;font-size: 22px; font-weight: bold" >0.000</span> eth</span>
                        <button onclick="withdrawLotteryGameIncome()" class="withdraw-btn">提现</button>
                    </div>
                </div>

                <div class="income-kol-area">
                    <div class="income-header" >Key收入</div>
                    <div class="income-body">
                        <button onclick="openKolKeyMainPage()" class="withdraw-btn">key主页查看</button>
                    </div>
                </div>
            </div>
            <div class="user-settings">
                <div class="user-area-tittle">设置</div>

                <div class="user-info">
                    <div class="about-twitter">
                        <div style="display: flex;">
                            <span class="user-twitter-avatar"><img id="user-twitter-avatar" src="/assets/file/logo.png"
                                                                                         alt="twitter-avatar"></span>
                            <div>
                                <span class="user-twitter-name name twitterName"><span id="user-setting-name">未绑定</span></span>
                                <br>
                                <span class="user-twitter-username username twitterUserName"><span id="user-setting-user-name">未绑定</span></span>
                            </div>

                        </div>
                        <button onclick="refreshTwitterInfo()" class="withdraw-btn">同步推特</button>
                    </div>
                    <div class="about-ninja">
                        <span>Web3 ID:<span id="basic-web3-id" class="user-web3-id">0x123...</span></span>
                        <br>
                        <span>积分:<span id="dessage-web3-token" class="user-ninja-noun">0.00 </span>dsg</span>
                    </div>
                </div>

                <div class="user-setting-action">
                    <button onclick="quitFromService()" class="cancel-btn">退出</button>
                    <button onclick="clearCachedData()" class="cancel-btn">清空缓存</button>
                </div>

            </div>
        </div>
        <div id="tweet-detail" class="tweet-detail" style="display: none;">
            <button id="back-button" class="back-button">返回</button>

            <div class="tweet-header">
                <img src="" alt="Avatar" class="twitterAvatar">
                <span class="name twitterName"></span>
                <span class="username twitterUserName"></span>
                <span class="time tweetCreateTime"></span>
            </div>

            <div class="tweet-text"></div>

            <div class="tweet-interaction">
                <div class="tweet-action">
                    <button class="tweet-action-vote">
                        <img src="/assets/file/tweet-action-vote-eth.png"
                             style="width: 22px;height: auto" alt=""/>
                        <span style="font-weight: lighter"> <span
                                    class="tweet-action-vote-val">0.01</span> eth</span> 投票
                    </button>
                </div>
                <div class="tweet-info">
                    <span class="vote-count">投票数: <span class="vote-number">0</span></span>
                    Payment Status: <span class="tweetPaymentStatus"></span>
                    <button class="tweetPaymentRetry" id="tweetPaymentRetryInDetail">继续支付</button>
                    <button class="tweetRemoveUnPaid" id="tweetRemoveUnPaidInDetail">删除</button>
                    <div class="tweet-prefixed-hash">
                        <span class="vote-count">推文Hash:</span>
                        <span id="tweet-prefixed-hash"></span>
                    </div>
                </div>
            </div>
        </div>
        <div id="nj-user-profile" class="nj-user-profile">
            <button id="back-button" class="back-button">返回</button>
            <div class="nj-user-summary">
                <div class="tweet-header">
                    <img src="" alt="Avatar" class="twitterAvatar">
                    <span class="name twitterName">ws</span>
                    <span class="username twitterUserName">@wsliss</span>
                    <span class="web3id">0xAb8483F64d9C6d1EcF9b849Ae677dD3315835cb2</span>
                </div>
            </div>

            <div class="nj-user-tweet-area">
                <div id="tweetTemplateForNjUsrProfile" class="tweet-card" style="display: none;">
                    <div class="tweet-footer">
                        <div class="tweet-info"> 投票数: <span class="total-vote-count">0</span></div>

                        <div class="vote-count"> 他的投票数: <span class="nj-user-vote-count">0</span></div>

                        <div class="tweet-action">
                            <button class="tweet-action-vote">
                                <img src="/assets/file/tweet-action-vote-eth.png"
                                     style="width: 22px;height: auto" alt=""/>
                                <span style="font-weight: lighter"> <span
                                            class="tweet-action-vote-val">0.01</span> eth</span> 投票
                            </button>
                        </div>
                    </div>
                </div>
                <button class="tweetsPostedByNjUser" onclick="loadPostedTweetsOfNjUsr()">他发布推文</button>
                <button class="tweetsVotedNjUser" onclick="loadVotedTweetsOfNjUsr()">他投票推文</button>
                <div id="nj-user-posted-tweets" class="tweets-park"></div>
                <div id="nj-user-vote-tweets" class="tweets-park"></div>
            </div>
        </div>
    </div>
    <div class="right-operation-area">
        <div class="lottery-game-info" id="lottery-game-info">
            <div class="lottery-round-info">
                <div class="lottery-round">第<span class="lottery-game-round-no">0</span>期</div>
                <div class="lottery-amount-div">
                    <span class="lottery-amount">0.0</span>
                    <span class="eth-symbol">eth</span>
                </div>
                <div class="lottery-amount-tips" style="color: rgba(255,255,255,0.5)">本期奖池</div>
            </div>
            <div class="lottery-timer">
                <div class="countdown-result" id="countdown-result">开奖中</div>
                <div class="countdown" id="lottery-count-down">
                    <div class="number days" style="padding: 0 ;margin: 0 6px">02</div>
                    天
                    <div class="number hours">00</div>
                    :
                    <div class="number minutes">00</div>
                    :
                    <div class="number seconds">00</div>
                </div>
                <span style="color: #A0A0A5; font-size: 12px">开奖时间</span>
            </div>
            <div class="lottery-stats">
                <div class="lottery-stats-label">
                    累计奖金:
                    <span class="lottery-stats-no" id="lottery-total-amount" style="font-weight: bold">0.00</span>
                    <span class="lottery-stats-unit">eth</span>
                </div>
                <div class="lottery-stats-label">
                    队伍数:
                    <span class="lottery-stats-no" id="lottery-current-team-amount" style="font-weight: bold">0</span>
                    <span class="lottery-stats-unit"> 队</span>
                </div>
                <div class="lottery-stats-label">
                    总票数:
                    <span class="lottery-stats-no" id="lottery-current-ticket-amount" style="font-weight: bold">0</span>
                    <span class="lottery-stats-unit">张</span>
                </div>
                <button class="lottery-participate-btn" onclick="openLotteryMainPage()">我的彩票</button>
            </div>
        </div>
    </div>
</div>

<div class="hover-card" id="hover-card" onmouseleave="hideHoverCard(this)">
    <img src="" alt="Avatar" id="hover-avatar" class="twitterAvatar">
    <div id="hover-name" class="name twitterName"></div>
    <span id="hover-user-name" class="username twitterUserName">@wsliss</span>
    <div class="hover-card-content">
        <div>推文总数: <span id="hover-tweet-count"></span></div>
        <div>被打赏数: <span id="hover-vote-count"></span></div>
        <div>打赏数: <span id="hover-voted-count"></span></div>
    </div>
    <button id="buy-key-button" class="buy-key-button">查看详情</button>
</div>
<div id="vote-no-chose-modal" class="vote-chose-modal-class">
    <div class="vote-no-modal-content">
        <div class="vote-no-modal-header">
            <span class="vote-no-close" onclick="closeVoteModal()">&times;</span>
            <h2 style="margin: 0">推文投票</h2>
        </div>
        <div class="vote-no-modal-body">
            <div class="quantity-selector">
                <p style="padding: 0; margin: 0;">票数：</p>
                <button id="decreaseVote" onclick="decreaseVote()"
                        style="border-bottom-left-radius: 12px;border-top-left-radius: 12px">-
                </button>
                <input type="number" id="voteCount" value="1" min="1">
                <button id="increaseVote" onclick="increaseVote()"
                        style="border-bottom-right-radius: 12px;border-top-right-radius: 12px">+
                </button>
            </div>
            <label style="color: #898989; font-size: 14px; margin-left: 54px">
                <input type="checkbox" id="shareOnTwitter" checked>
                转发到推特
            </label>
        </div>
        <div class="vote-no-modal-footer">
            <button id="cancelButton" class="cancel-btn" onclick="closeVoteModal()">取消</button>
            <button id="confirmButton" class="confirm-btn" onclick="confirmVoteModal()">确定</button>
        </div>
    </div>
</div>
<div class="modal-overlay" id="modal-overlay"></div>
<div class="modal-for-tweet-post">
    <span class="tweet-post-close-btn" onclick="closePostTweetDiv()">&times;</span>
    <div class="tweets-content-txt-area .d-radius" id="tweets-content-txt-area" contenteditable="true"
         data-placeholder="What's happening!?"></div>
    <div style="display: flex; justify-content: flex-end; align-items: center">
        <button id="tweet-post-with-eth-btn" onclick="postTweetWithPayment()" class="d-radius">
            <img src="/assets/file/Twitter-logo.png" alt="twitter" style="width: 24px; height: 24px; margin-right: 6px">
            <span id="tweet-post-with-eth-btn-txt">发布推文</span></button>
    </div>
</div>

<script>

    const ninjaUserObj = {{ .NinjaUsrInfoJson }};
    const targetTweet = {{.TargetTweet }};

    let curScrollContentID = 0;

    document.addEventListener("DOMContentLoaded", initMainPage);

    function initNjBasic() {
        if (!ninjaUserObj) {
            window.location.href = "/signIn";
            return;
        }

        NJUserBasicInfo.cacheNJUsrObj(ninjaUserObj);
        let tw_data = TwitterBasicInfo.loadTwBasicInfo(ninjaUserObj.tw_id)
        if (tw_data) {
            document.getElementById("dessage-log-to-nj-log").src = tw_data.profile_image_url;
        }
    }

    async function initMainPage() {
        initNjBasic();
        await checkMetaMaskEnvironment(initBlockChainContract);
        await loadTweetsForHomePage();
        await showTargetTweetDetail();
    }

    function menuOnClicked(curMenuId) {
        curScrollContentID = curMenuId;
        document.querySelectorAll('.menu-item-left-area').forEach(i => i.classList.remove('active'));
        this.classList.add('active');

        const contentId = this.getAttribute('data-content');
        document.querySelectorAll('.content-in-middle-area').forEach(c => c.classList.remove('active'));
        document.getElementById(contentId).classList.add('active');
        document.getElementById("tweet-detail").style.display = 'none';
        document.getElementById("nj-user-profile").style.display = 'none';

        if (contentId === "middle-div-user-tweets") {
            loadTweetsUserPosted();
        } else if (contentId === "middle-div-home") {
            loadTweetsForHomePage()
        } else if (contentId === "middle-div-leaderboard") {
            initTopPage(true);
        } else if (contentId === "middle-div-about-user") {
            initAboutUserPage();
        }
    }

    function openLotteryMainPage() {
        window.location.href = "/lotteryGame";
    }

    function openKolKeyMainPage() {
        window.location.href = "/kolKey";
    }

    const tweetsContentArea = document.getElementById('tweets-content-txt-area');

    tweetsContentArea.addEventListener('focus', function () {
        if (this.textContent === "What's happening!?") {
            this.textContent = '';
        }
    }, false);

    tweetsContentArea.addEventListener('blur', function () {
        if (this.textContent.trim() === '') {
            this.textContent = '';
        }
    }, false);


    async function setupUserBasicInfoInSetting() {
        document.getElementById("basic-web3-id").innerText = ninjaUserObj.eth_addr;
        const twitterInfo = await loadTwitterUserInfoFromSrv(ninjaUserObj.tw_id, true, false);
        if (!twitterInfo) {
            console.log("no such twitter user");
            return;
        }
        document.getElementById("user-twitter-avatar").src = twitterInfo.profile_image_url;
        document.getElementById("user-setting-name").innerText = twitterInfo.name;
        document.getElementById("user-setting-user-name").innerText = twitterInfo.username;
    }

    async function initAboutUserPage() {

        await setupUserBasicInfoInSetting();

        showWaiting("syncing from block chain");

        await reloadGameBalance();
        await reloadTweetBalance();

        const obj = await loadNJUserInfoFromSrv(ninjaUserObj.eth_addr, true);
        if (!obj) {
            hideLoading();
            console.log("can't be empty")
            return;
        }
        document.getElementById('tweet-no-has-income').innerText = obj.tweet_count;
        hideLoading();
    }

</script>
</body>
</html>