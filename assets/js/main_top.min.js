function initTopDivStatus(e,t){const o=document.getElementById("middle-div-leaderboard");o.querySelectorAll(".top-div").forEach((e=>e.style.display="none")),document.getElementById(e).style.display="block",t||(t=0);const a=o.querySelectorAll(".top-topic-btn");a.forEach((e=>e.classList.remove("active"))),a[t].classList.add("active"),document.getElementById("tweet-detail").style.display="none"}const cachedTopVotedTweets=new MemCachedTweets;async function initTopPage(){try{showWaiting("loading..."),curScrollContentID=1,initTopDivStatus("top-most-voted-tweet",0),await __loadMostVotedTweets(!0)}catch(e){console.log(e),showDialog(DLevel.Error,e.toString())}finally{hideLoading()}}async function fillMostVotedTweet(e,t){return __fillNormalTweet(e,"top-most-voted-tweet",t,"tweetTemplateForTop","tweet-card-for-most-voted-",!0,TweetDetailSource.MostVoted,(function(e,t,o){e.querySelector(".vote-number").textContent=o.vote_count,__showVoteButton(e,o,(function(e){showWaiting("Re-ranking"),__loadMostVotedTweets(!0).finally((e=>{hideLoading()}))}))}))}async function loadOlderMostVotedTweet(){if(0!==cachedTopVotedTweets.latestID)return __loadMostVotedTweets(!1);console.log("no need to load older data")}async function __loadMostVotedTweets(e){e&&(cachedTopVotedTweets.latestID=0);const t=new TweetQueryParam(cachedTopVotedTweets.latestID,"",[]),o=await PostToSrvByJson("/mostVotedTweet",t);o&&0!==o.length?(cachedTopVotedTweets.latestID=o[o.length-1].vote_count,await fillMostVotedTweet(e,o)):e||(cachedTopVotedTweets.moreOldTweets=!1)}const cachedTopVotedKolUser=new MemCachedTweets;async function switchToTopKol(){curScrollContentID=12,initTopDivStatus("top-hot-Kol",1),await loadMostVoterOrVotedUser("top-hot-Kol",cachedTopVotedKolUser,!0,!1)}async function loadOlderMostVotedKol(){return loadMostVoterOrVotedUser("top-hot-Kol",cachedTopVotedKolUser,!1,!1)}async function loadMostVoterOrVotedUser(e,t,o,a){o&&(t.latestID=0);const n=new TweetQueryParam(t.latestID,"",[]);a&&n.voted_ids.push(1);const s=await PostToSrvByJson("/mostVotedKol",n);s&&0!==s.length?(t.latestID=a?s[s.length-1].vote_count:s[s.length-1].be_voted_count,await fillMostKolOrVoterPark(e,o,s,a)):o||(t.moreOldTweets=!1)}let userRankStartNo=1;async function fillMostKolOrVoterPark(e,t,o,a){const n=document.getElementById(e);t&&(n.innerHTML="",userRankStartNo=1);for(const e of o){NJUserBasicInfo.cacheNJUsrObj(e);const t=document.getElementById("team-member-card-template").cloneNode(!0);t.style.display="block",t.id="";const o=t.querySelector(".twitterAvatar");if(e.tw_id){const o=await __setOnlyHeader(t,e.tw_id,e.eth_addr),a=t.querySelector(".team-membersAvatar");a.addEventListener("mouseenter",(t=>showHoverCard(t,o,e.eth_addr))),a.addEventListener("mouseleave",(()=>hideHoverCard(a)))}else o.src=__defaultLogo,t.querySelector(".twitterName").innerText=e.eth_addr;const s=t.querySelector(".user-voted-count");1===userRankStartNo?s.classList.add("vote-numberOne"):2===userRankStartNo?s.classList.add("vote-numberTwo"):3===userRankStartNo?s.classList.add("vote-numberThree"):s.classList.add("vote-numberOther"),s.innerText=a?e.vote_count:e.be_voted_count,n.appendChild(t),userRankStartNo++}}const cachedTopVoterUser=new MemCachedTweets;async function switchToTopVoter(){curScrollContentID=13,initTopDivStatus("top-hot-voter",2),await loadMostVoterOrVotedUser("top-hot-voter",cachedTopVoterUser,!0,!0)}async function loadOlderMostVoter(){return loadMostVoterOrVotedUser("top-hot-voter",cachedTopVoterUser,!1,!0)}